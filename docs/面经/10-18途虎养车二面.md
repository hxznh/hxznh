1. 自我介绍

2. 为什么不实习了

3. 项目中主要有哪些模块？你主要负责什么模块？

   主要负责菌株管理+设备监控

4. 这两个模块怎么设计的？

   先讲了一下主要功能。

   怎么设计的，主要要从哪些方面讲呢？

   1. 比如数据库设计，接口设计，类似的这些

   数据库设计参与的比较少，大部分是另一个人做。

   对接口更多的是专注于某一个功能的实现，遵循Restful风格。

   然后对内部共用的功能进行提取，或许是工具类或许是一个共用的函数。

   用设计模式进行优化

5. 数据库有哪些比较重要的库表，各自的作用是怎么样的？

   菌株信息、设备信息、温度信息、菌株存放位置的信息。

6. 菌株选位置的时候，怎么保证不会被同一时间不同的人来选取，如果不是你实现的，要你来做会怎么做。 **！**

   实际实现：前端都可以进行选取，在提交的时候进行校验。

   我的思路：前端选取的时候先锁定，如果最后没有提交，最后去释放这个位置，提交表单时还是要校验一下。

7. 后端怎么校验放置的位置是合法的。 **!**

   加锁，查询位置为空，再插入。

   

8. 加锁会带来什么问题？

   性能下降，线程阻塞。

9. 如果把这个场景扩展到电商场景，方案还行得通吗？

   不行，性能不够

10. 那怎么优化？  **!**

    redis做限流。

    只能想到拆表。

    1. 拆表是有损的，一般来说不会考虑这个情况，应该试着先在单机模式下优化好性能。

    那就用内存的cas来扣减库存，扣减之后是合法的再去数据库里写数据。

    2. 那不加锁有没有办法实现呢？ **！**

    不知道

    3. 更新数据库时，在sql中限制一个条件，比如剩余数量>需要扣减的数量，这样不论如何，都只会有几个合法的请求能够执行这个语句的。 另外就是也可以在redis中，使用redis变量原子减的方式来做。

11. 那接下来说一下设备数据监控的时候，物联网场景下，如果监控的规模比较大，数据规模很大，怎么去设计模型，怎么存储数据？

    公司数据量比较小，用的mysql。如果数据量比较大的话，可以用nosql来存储。比如mongodb，可以对某一个文档进行追加写入，那这样写入的性能就比较高。

    1. 那如果时间比较长了，数据量比较多的话，怎么解决呢？

    目前是只需要存储近一段时间的数据，所以可以定时删除旧数据，保证数据规模是一个可接受的大小。

    如果要存储所有数据，那可以做冷热数据的分离，将一定时间之前的数据移到冷数据的表中，保证热数据的表的大小可控。

    2. 那如果热数据的数据量还是比较大呢？  **!**

       在想怎么单机优化。没想出来，他说这个只能拆。
       
       分库分表，只要能按一个规则算出来某个编号的设备的数据存在哪个表中，就可以保证数据规模可控。

> 反问

1. 培训机制

   因为想不出问题了，就问了个培训机制。

   比较常规的回答。

   从公司到业务到部门小组的培训。

   了解公司业务，有导师手把手带着做。但能够提升就需要个人在项目中锻炼和实践。

   讲了挺多的，这里简单带过，不关键。



10.20 晚上发邮件 挂了









